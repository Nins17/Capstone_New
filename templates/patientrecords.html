<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Diarec Doctor</title>
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='assets/img/icon.png') }}">

  <meta name="description" content="">
  <meta name="keywords" content="">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="{{url_for('static',filename='assets/vendor/bootstrap/css/bootstrap.min.css')}}" rel="stylesheet">
  <link href="{{url_for('static',filename='assets/vendor/bootstrap-icons/bootstrap-icons.css')}}" rel="stylesheet">
  <link href="{{url_for('static',filename='assets/vendor/aos/aos.css')}}" rel="stylesheet">
  <link href="{{url_for('static',filename='assets/vendor/fontawesome-free/css/all.min.css')}}" rel="stylesheet">
  <link href="{{url_for('static',filename='assets/vendor/glightbox/css/glightbox.min.css')}}" rel="stylesheet">
  <link href="{{url_for('static',filename='assets/vendor/swiper/swiper-bundle.min.css')}}" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="{{url_for('static',filename='assets/css/main.css')}}" rel="stylesheet">

  <!-- =======================================================
  * Template Name: Medilab
  * Template URL: https://bootstrapmade.com/medilab-free-medical-bootstrap-theme/
  * Updated: Aug 07 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body class="starter-page-page d-flex flex-column min-vh-100">

  <header id="header" class="header sticky-top">

    <div class="branding d-flex align-items-center">

      <div class="container position-relative d-flex align-items-center justify-content-between">
        <a href="index.html" class="logo d-flex align-items-center me-auto">
          <h1 class="sitename">DiaRec</h1>
        </a>
        <nav id="navmenu" class="navmenu">
          <ul>
            <li><a href="/admin_home">Home<br></a></li>            
            <li><a href="/addpatient">Add Patient</a></li>
            <li><a href="/lab_results"> Lab Results</a></li>

        <li class="dropdown">
        <a href="#">
        <span>Doctor</span> 
        <i class="bi bi-chevron-down toggle-dropdown"></i>
        </a>
        <ul class="dropdown-menu">
   
        <li><a href="/sign_out" class="dropdown-item d-flex align-items-center text-danger"><i class="bi bi-box-arrow-right me-2"></i> Sign Out</a></li>
        </ul>
      </li>
      
        
          </ul>
          <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>


          
        </nav>
        

    </div>

  </header>
  <main class="main mt-5">

 
       <div class="container" data-aos="fade-up" data-aos-delay="100">
    <div class="d-flex justify-content-between align-items-center">
        <h2>Lab Results</h2>
        <input class="form-control form-control-sm" id="myInput" type="text" placeholder="Search.." style="width: 250px;">
      </div>
      <br>

  <!-- Filterable and Sortable Table -->
  <table class="table table-bordered table-striped">
    <thead class="table-primary">
      <tr>
        <th>File ID<i id="arrow-0" class="bi bi-chevron-up"></i></th>
        <th>Patient Name <i id="arrow-1" class="bi bi-chevron-up"></i></th>
        <th>Blood Type <i id="arrow-2" class="bi bi-chevron-up"></i></th>
        <th>Apointment Date<i id="arrow-3" class="bi bi-chevron-up"></i></th>
        <th>Result Release Date<i id="arrow-3" class="bi bi-chevron-up"></i></th>
        <th>Test Type<i id="arrow-3" class="bi bi-chevron-up"></i></th>
        <th>Test Result<i id="arrow-3" class="bi bi-chevron-up"></i></th>
        <th>Status<i id="arrow-3" class="bi bi-chevron-up"></i></th>
        <th>Person Incharge<i id="arrow-3" class="bi bi-chevron-up"></i></th>
      </tr>
    </thead>
    <tbody id="myTable">
      {%for record in patient_records%}
      <tr>
        <td>{{record[0]}}</td>
        <td>{{record[2]}}</td>
        <td>{{record[3]}}</td>
        <td>{{record[4]}}</td>
        <td>{{record[5]}}</td>
        <td>{{record[9]}}</td>
        <td><a href="{{url_for ('static',filename=record[6])}}" onclick="alert('Download file?');">Download Result</a></td>
        <td>{{record[7]}}</td>
        <td>{{record[8]}}</td>
      </tr>
      {%endfor%}
    </tbody>
  </table>
</div>
     

 
   

 </main>

  
 
  
  
  

 <footer id="footer" class="footer light-background mt-auto" >
  <div class="container copyright text-center mt-4">
    <p>Â© <span>Copyright</span> <strong class="px-1 sitename">DiaRec</strong> <span>All Rights Reserved</span></p>
    <div class="credits">

      Designed by <a href="https://bootstrapmade.com/">F1 BOUND</a>
    </div>
  </div>
</footer>


  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="{{url_for ('static',filename='assets/vendor/bootstrap/js/bootstrap.bundle.min.js')}}"></script>
  <script src="{{url_for ('static',filename='assets/vendor/php-email-form/validate.js')}}"></script>
  <script src="{{url_for ('static',filename='assets/vendor/aos/aos.js')}}"></script>
  <script src="{{url_for ('static',filename='assets/vendor/glightbox/js/glightbox.min.js')}}"></script>
  <script src="{{url_for ('static',filename='assets/vendor/purecounter/purecounter_vanilla.js')}}"></script>
  <script src="{{url_for ('static',filename='assets/vendor/swiper/swiper-bundle.min.js')}}"></script>

  <!-- Main JS File -->
  <script src="{{url_for ('static',filename='assets/js/main.js')}}"></script>
  <script src="{{url_for ('static',filename='assets/js/table.js')}}'"></script>
  
</body>
<script>
  // Filter function
  document.getElementById("myInput").addEventListener("keyup", function () {
    var input, filter, table, tr, td, i, txtValue;
    input = document.getElementById("myInput");
    filter = input.value.toUpperCase();
    tbody = document.getElementById("myTable");
    tr = tbody.getElementsByTagName("tr");
  
    for (i = 0; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td");
        if (td.length > 0) {
            var showRow = false;
            for (var j = 0; j < td.length; j++) {
                txtValue = td[j].textContent || td[j].innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    showRow = true;
                    break;
                }
            }
            tr[i].style.display = showRow ? "" : "none";
        }
    }
  });
  
  // Sort function
  function sortTable(n) {
    var table, tbody, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
    table = document.querySelector("table"); // Get the first table
    tbody = document.getElementById("myTable");
    switching = true;
    dir = "asc"; // Default sort direction
  
    // Reset arrows
    document.querySelectorAll("th i").forEach(icon => {
        icon.classList.remove("bi-chevron-down", "bi-chevron-up");
        icon.classList.add("bi-chevron-up");
    });
  
    while (switching) {
        switching = false;
        rows = tbody.getElementsByTagName("tr");
  
        for (i = 0; i < rows.length - 1; i++) {
            shouldSwitch = false;
            x = rows[i].getElementsByTagName("td")[n];
            y = rows[i + 1].getElementsByTagName("td")[n];
  
            let xValue = isNaN(parseFloat(x.innerText)) ? x.innerText.toLowerCase() : parseFloat(x.innerText);
            let yValue = isNaN(parseFloat(y.innerText)) ? y.innerText.toLowerCase() : parseFloat(y.innerText);
  
            if ((dir === "asc" && xValue > yValue) || (dir === "desc" && xValue < yValue)) {
                shouldSwitch = true;
                break;
            }
        }
  
        if (shouldSwitch) {
            rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
            switching = true;
            switchcount++;
        } else {
            if (switchcount === 0 && dir === "asc") {
                dir = "desc";
                switching = true;
            }
        }
    }
  
    // Toggle arrow icons
    let arrow = document.querySelectorAll("th i")[n];
    if (dir === "asc") {
        arrow.classList.remove("bi-chevron-up");
        arrow.classList.add("bi-chevron-down");
    } else {
        arrow.classList.remove("bi-chevron-down");
        arrow.classList.add("bi-chevron-up");
    }
  }
  
  // Attach sorting function to header clicks
  document.addEventListener("DOMContentLoaded", function () {
    let headers = document.querySelectorAll("th");
    headers.forEach((header, index) => {
        header.addEventListener("click", function () {
            sortTable(index);
        });
    });
  });
</script>
  

</html>